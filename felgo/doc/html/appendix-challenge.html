<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- sdlgfx-port.qdoc -->
  <title>Appendix: Issues with the Challenge and Felgo | felgo-neurocid</title>
</head>
<body>
<div class="sidebar"><div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Appendix: Issues with the Challenge and Felgo</h1>
<span class="subtitle"></span>
<!-- $$$appendix-challenge.html-description -->
<div class="descr"> <a name="details"></a>
<ul>
<li>The first link in &quot;https://docs.google.com/document/d/1lWUHemIXMqJQfc3OkmarzQ2dlokDPTrpJa5NXJWNIkI/edit&quot; is a 404.</li>
<li>In the Fedora instructions &quot;https://felgo.com/cross-platform-development/install-felgo-on-fedora&quot; you recommend the following:<pre class="cpp">cd lib64<span class="operator">/</span>
sudo chown root:root libcrypto<span class="operator">.</span>so<span class="operator">.</span><span class="number">1.0.0</span> libssl<span class="operator">.</span>so<span class="operator">.</span><span class="number">1.0.0</span>
sudo cp libcrypto<span class="operator">.</span>so<span class="operator">.</span><span class="number">1.0.0</span> libssl<span class="operator">.</span>so<span class="operator">.</span><span class="number">1.0.0</span> <span class="operator">/</span>usr<span class="operator">/</span>lib64<span class="operator">/</span></pre>
<p>The above procedure is problematic for 3 reasons:</p>
<ul>
<li>Shipping binaries for dependencies isn't a wise thing to do in general, but in this case you are shipping outdated versions of *very* security-related libraries and furthermore you suggest to install them to the system permanently for other programs to use. That is a very real (and easily avoidable) security risk. Apart from the security risk there is a series of other problems arising from that (ask if you want me to go into further detail)</li>
<li>Changing ownership of the file beforehand and copying after has no effect if the files already exist in /usr/lib64/ (or just one exist, which might lead users to the tutorial) For example:<pre class="cpp"><span class="preprocessor"># create two files with unprivileged (= no root) ownership.</span>
touch userfile
touch rootfile

<span class="preprocessor"># Change ownership of one of the files to root.</span>
sudo chown root:root rootfile

<span class="preprocessor"># View the result</span>
ls <span class="operator">-</span>l userfile rootfile
<span class="operator">-</span>rw<span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span> <span class="number">1</span> felgouser  users <span class="number">0</span> Apr  <span class="number">1</span> <span class="number">20</span>:<span class="number">05</span> userfile
<span class="operator">-</span>rw<span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span> <span class="number">1</span> root       root  <span class="number">0</span> Apr  <span class="number">1</span> <span class="number">20</span>:<span class="number">05</span> rootfile

<span class="preprocessor"># Copy rootfile over userfile</span>
cp rootfile userfile

<span class="preprocessor"># View the result</span>
ls <span class="operator">-</span>l userfile rootfile
<span class="operator">-</span>rw<span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span> <span class="number">1</span> felgouser  users <span class="number">0</span> Apr  <span class="number">1</span> <span class="number">20</span>:<span class="number">06</span> userfile
<span class="operator">-</span>rw<span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span>r<span class="operator">-</span><span class="operator">-</span> <span class="number">1</span> root       root  <span class="number">0</span> Apr  <span class="number">1</span> <span class="number">20</span>:<span class="number">06</span> rootfile

<span class="preprocessor"># Please note, that the ownership of the target file (userfile) has not changed,</span></pre>
</li>
<li>According to the FHS (https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard) the proper place to store local changes to the system is in the /usr/local/ tree. Adhering to that convention prevents problems emerging from file conflict and makes management of local changes much easier.</li>
</ul>
<p>There are two solutions for these problems:</p>
<ul>
<li>Use LD_LIBRARY_PATH<p>For example:</p>
<pre class="cpp"><span class="preprocessor"># Make sure libraries are looked for in ./lib64 first.</span>
LD_LIBRARY_PATH<span class="operator">=</span><span class="string">&quot;./lib64:$LD_LIBRARY_PATH&quot;</span> <span class="operator">.</span><span class="operator">/</span>FelgoInstaller<span class="operator">-</span>linux_x64<span class="operator">-</span>online<span class="operator">.</span>run</pre>
</li>
<li>If you really want to install a library permanently use a different path e.g: &quot;/usr/local/lib64&quot; (or &quot;/usr/local/lib&quot; depending on the distro) and instead of &quot;chown + cp&quot; use a different coreutil: &quot;install&quot;.<p>For example:</p>
<pre class="cpp"><span class="preprocessor"># copies the files to /usr/local/lib64 while making backups of existing files (if there are any). Finally sets the ownership to root.</span>
sudo install <span class="operator">-</span>b <span class="operator">-</span>o root lib64<span class="operator">/</span>libcrypto<span class="operator">.</span>so<span class="operator">.</span><span class="number">1.0.0</span> lib64<span class="operator">/</span>libssl<span class="operator">.</span>so<span class="operator">.</span><span class="number">1.0.0</span> <span class="operator">/</span>usr<span class="operator">/</span>local<span class="operator">/</span>lib64</pre>
</li>
</ul>
</li>
<li>The samplelauncher renders fonts very small (OpenSUSE Tumbleweed using X11 with awesome WM and picom at 1920x1080 with 96dpi).</li>
<li>Installing Felgo on a fresh minimal Debian 10 requires a dependency not covert by the tutorial: libfontconfig1</li>
<li>Without a headless installer I had to do workarounds to install Felgo on my headless build-server.</li>
</ul>
</div>
<!-- @@@appendix-challenge.html -->
</body>
</html>
